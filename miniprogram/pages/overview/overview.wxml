<view class="container">
  <view class="date-card">
    <picker mode="date" value="{{targetDate}}" end="{{today}}" bindchange="handleDateChange">
      <view class="date-picker-wrapper">
        <text class="date-value">{{targetDate}}</text>
        <text class="date-icon">ğŸ“…</text>
      </view>
    </picker>
  </view>

  <view class="workday-info">
    <text class="badge {{isWorkday ? 'workday' : 'holiday'}}">{{isWorkday ? 'å·¥ä½œæ—¥' : 'ä¼‘æ¯æ—¥'}}</text>
    <text class="info-text">{{workdayText}}</text>
  </view>

  <view wx:if="{{loading}}" class="loading">
    <text>åŠ è½½ä¸­...</text>
  </view>

  <block wx:for="{{categories}}" wx:key="key">
    <view class="category-card">
      <view class="category-header">
        <text class="category-title">{{item.title}}</text>
        <text class="category-count {{item.tone}}">{{item.count}}</text>
      </view>

      <view wx:if="{{item.list.length}}" class="person-grid">
        <block wx:for="{{item.list}}" wx:for-item="person" wx:key="user_id">
          <view class="person-card {{person.compact ? 'compact' : ''}}">
            <text class="name">{{person.name}}</text>
            <text wx:if="{{person.extra}}" class="status">{{person.extra}}</text>
          </view>
        </block>
      </view>

      <view wx:else class="empty-state">
        <text>æš‚æ— äººå‘˜</text>
      </view>
    </view>
  </block>

  <view wx:if="{{!categories.length && !loading}}" class="empty-state global">
    <text>æš‚æ— æ•°æ®</text>
  </view>
</view>

