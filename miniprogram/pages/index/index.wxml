<!-- pages/index/index.wxml -->
<view class="container">
  <!-- æ‰“å¡å¡ç‰‡ -->
  <view class="card clock-card">
    <view class="clock-time">{{currentTime}}</view>
    <view class="clock-date">{{currentDate}}</view>
    
    <view class="clock-status" wx:if="{{showClockStatus}}">
      <view class="status-item">
        <text class="status-label">ä¸Šç­</text>
        <text class="status-value">{{checkinStatus}}</text>
      </view>
      <view class="status-item">
        <text class="status-label">ä¸‹ç­</text>
        <text class="status-value">{{checkoutStatus}}</text>
      </view>
    </view>

    <view class="clock-actions">
      <button class="btn btn-primary" bindtap="checkin" disabled="{{checkinDisabled}}">
        <text>ğŸ“</text>
        <text>ä¸Šç­æ‰“å¡</text>
      </button>
      <button class="btn btn-success" bindtap="checkout" disabled="{{checkoutDisabled}}">
        <text>ğŸ“</text>
        <text>ä¸‹ç­æ‰“å¡</text>
      </button>
    </view>

    <view class="clock-location" wx:if="{{location}}">{{location}}</view>
  </view>

  <!-- å¿«æ·åŠŸèƒ½ -->
  <view class="quick-actions">
    <view class="quick-action-item" bindtap="goToLeave">
      <view class="action-icon">ğŸ–ï¸</view>
      <view class="action-label">è¯·å‡ç”³è¯·</view>
    </view>
    <view class="quick-action-item" bindtap="goToOvertime">
      <view class="action-icon">â°</view>
      <view class="action-label">åŠ ç­ç”³è¯·</view>
    </view>
    <view class="quick-action-item approval-only" bindtap="goToApproval" wx:if="{{hasApprovalPermission}}">
      <view class="action-icon">âœ…</view>
      <view class="action-label">
        <text>æˆ‘çš„å®¡æ‰¹</text>
        <text class="badge" wx:if="{{pendingCount > 0}}">{{pendingCount}}</text>
      </view>
    </view>
    <view class="quick-action-item" bindtap="goToStats">
      <view class="action-icon">ğŸ“Š</view>
      <view class="action-label">æˆ‘çš„ç»Ÿè®¡</view>
    </view>
  </view>

  <!-- æœ€è¿‘è€ƒå‹¤ -->
  <view class="card">
    <view class="card-header">
      <text class="card-title">æœ€è¿‘è€ƒå‹¤</text>
      <text class="card-link" bindtap="goToAttendance">æŸ¥çœ‹æ›´å¤š</text>
    </view>

    <view class="attendance-list" wx:if="{{recentAttendance && recentAttendance.length > 0}}">
      <view class="attendance-item" wx:for="{{recentAttendance}}" wx:key="id">
        <view class="attendance-date">
          <view class="attendance-day">{{item.day}}</view>
          <view class="attendance-month">{{item.month}}æœˆ</view>
        </view>
        <view class="attendance-info">
          <view class="attendance-time">
            <text>ä¸Šç­: {{item.checkinTime || '-'}}</text>
            <text class="status-badge status-warning" wx:if="{{item.isLate}}">è¿Ÿåˆ°</text>
          </view>
          <view class="attendance-location" wx:if="{{item.checkinLocation}}">
            <text class="location-text">ğŸ“ {{item.checkinLocation}}</text>
          </view>
          <view class="attendance-time">
            <text>ä¸‹ç­: {{item.checkoutTime || '-'}}</text>
            <text class="status-badge status-warning" wx:if="{{item.isEarlyLeave}}">æ—©é€€</text>
          </view>
          <view class="attendance-location" wx:if="{{item.checkoutLocation}}">
            <text class="location-text">ğŸ“ {{item.checkoutLocation}}</text>
          </view>
        </view>
      </view>
    </view>

    <view class="empty-state" wx:else>
      <view class="empty-state-icon">ğŸ“</view>
      <view class="empty-state-text">æš‚æ— è€ƒå‹¤è®°å½•</view>
    </view>
  </view>
  
  <!-- ç‰ˆæƒä¿¡æ¯ -->
  <view class="app-footer">
    <text>Â© 2025 æ²³å—æ–°ç›Ÿç§‘æ•™æœ‰é™å…¬å¸ All Rights Reserved</text>
  </view>
</view>



